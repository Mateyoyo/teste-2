<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="Wd]kc!K5?zI+@eE*[e.3">irLeft</variable><variable id="utNf@IRg:8u%c$g5O.S!">irRight</variable><variable id="?X5-2WV;He|,$cK6p)MN">Couleur min</variable></variables><block type="function_definition" id="x~dj[lxtQmXM6n7ka#!4" x="650" y="0"><mutation name="detectCiterne" functionid="wg!2;{K~-L{cn.#$%z3^"/><field name="function_name">detectCiterne</field><comment>Fonction pour simuler la détection d'une citerne</comment><statement name="STACK"><block type="controls_if" id="}gj|u;K,/bQ5+F0H=wK6"><comment>Simule la détection de citerne (remplacer cette fonction par le vrai capteur)</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="sawpinread" id="xi28vMu77*r^/;Y#]dvT"><field name="pin">crickit.signal4</field></block></value><statement name="DO0"><block type="function_return" id="R?X!bgCf:BmNS#}V5/!*"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><comment>Simule la détection 20 % du temps</comment><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="h0-BWuc4m$x`Cr,@;%?;"><field name="BOOL">TRUE</field></block></value></block></statement><next><block type="function_return" id="x}g3O*C;u5$UYeSzEy=H"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="io8?2}i}0Dpo2`ll6lD%"><field name="BOOL">FALSE</field></block></value></block></next></block></statement></block><block type="pxt-on-start" id="CfSMqs1(Th85Yc^TQ)B7" x="78" y="42"><statement name="HANDLER"><block type="mixer_play_sound" id="G~{P:J1MI+,hc`D65r[{"><field name="sound">music.baDing</field><next><block type="sawmotorrun" id="$wtAeIapK:tiT`lnV+!o"><field name="motor">crickit.motor1</field><value name="speed"><shadow type="speedPicker" id="!y5e8t,%n]bfRYyn2Z)?"><field name="speed">0</field></shadow></value><next><block type="sawmotorrun" id="Zacp946_Mh)g/d.LI7tb"><field name="motor">crickit.motor2</field><value name="speed"><shadow type="speedPicker" id="+4Lgk(Eo,N=3bVFJKZF~"><field name="speed">0</field></shadow></value><next><block type="variables_set" id="mw6?l$V~Yc8:o%ap)6,F"><field name="VAR" id="utNf@IRg:8u%c$g5O.S!">irRight</field><value name="VALUE"><shadow type="math_number" id="lp^Q-%2Z]+M(.1}6z~.%"><field name="NUM">0</field></shadow></value><next><block type="typescript_statement" id="*D8E+g%UWx^_-?j.R+7@" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let irLeft = crickit.touch1" numlines="1" declaredvars="irLeft"></mutation><next><block type="typescript_statement" id="!G[3#U_v#m7kYrvz`NZ`" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let irRight = crickit.touch2" numlines="1" declaredvars="irRight"></mutation><next><block type="typescript_statement" id=",|4ZZ,||?%6=3xqPzYV1" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="basic.forever(function on_forever() {" line1="    followLine()" line2="    //  Suivre la ligne noire avec les capteurs tactiles" line3="    if (detectCiterne()) {" line4="        //  Si une citerne est détectée" line5="        crickit.motor1.stop()" line6="        //  Arrêter le moteur gauche" line7="        crickit.motor2.stop()" line8="        //  Arrêter le moteur droit" line9="        dropBilles()" line10="        //  Déposer les billes" line11="        pause(2000)" line12="    }" line13="    " line14="})" numlines="15"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_call" id="}?T?QHs,ZA2^@g=`2k7P" disabled="true" x="290" y="330"><mutation name="dropBilles" functionid=".R~Bd%NxPm:.OQ[HQ|-w"/></block><block type="function_definition" id="CAOLwN7DZQL:F!Ju,+!O" x="850" y="310"><mutation name="followLine" functionid="ZXDbI5WPA2t==GN)WJlL"/><field name="function_name">followLine</field><comment>Fonction pour suivre la ligne noire avec les capteurs tactiles</comment><statement name="STACK"><block type="variables_set" id="bVOElD*B8ne^.VD]$$Ht"><field name="VAR" id="Wd]kc!K5?zI+@eE*[e.3">irLeft</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="sawpinreadanalog" id="Y:wrx~#CH(:lO7`0_?eX"><field name="pin">crickit.signal1</field></block></value><next><block type="variables_set" id="5spFc*Y4U3,KvJ1DdzK3"><field name="VAR" id="utNf@IRg:8u%c$g5O.S!">irRight</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="sawpinreadanalog" id="z~6#39*[zLHOHq:2yu$4"><field name="pin">crickit.signal8</field></block></value><next><block type="controls_if" id="#WJE=,z_g(xi#T*1e,CJ"><mutation elseif="1" else="1"/><comment>Utiliser les capteurs tactiles pour guider les moteurs</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="+A(q~$2dKi]Vdl0p)GnN"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="E1Y|iH/y%K+fv,gZT#$("><field name="VAR" id="Wd]kc!K5?zI+@eE*[e.3">irLeft</field></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="#%={r,J}U3.X{HM)KxjB"><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="^,q+}iCcEX`2wo-Xb]/$"><field name="VAR" id="utNf@IRg:8u%c$g5O.S!">irRight</field></block></value></block></value></block></value><statement name="DO0"><block type="sawmotorrun" id="txp-ciy.8?M+N}.Oi`$;"><field name="motor">crickit.motor1</field><comment>Tourne légèrement à gauche</comment><value name="speed"><shadow type="speedPicker" id="C93!`6~lX@`3Svo^)=U!"><field name="speed">50</field></shadow></value><next><block type="sawmotorrun" id=";1Evb}emDkHTl-I4~Ln#"><field name="motor">crickit.motor2</field><comment>Moteur gauche plus lent</comment><value name="speed"><shadow type="speedPicker" id="T-pKjk[^z92P3[AY}6rR"><field name="speed">100</field></shadow></value></block></next></block></statement><value name="IF1"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="}htGs*Gg5o2hhNo`6@H+"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="*,Py39Z#Cq`qZA[WqW7P"><field name="VAR" id="utNf@IRg:8u%c$g5O.S!">irRight</field></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="88[VRS!gf*Dc)vL^Ss.?"><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="ZdJug25.7WAxyqPkIOgT"><field name="VAR" id="Wd]kc!K5?zI+@eE*[e.3">irLeft</field></block></value></block></value></block></value><statement name="DO1"><block type="sawmotorrun" id="fdgDa=6E2HM7/8psft-p"><field name="motor">crickit.motor1</field><comment>Moteur droit à pleine vitesse
Tourne légèrement à droite</comment><value name="speed"><shadow type="speedPicker" id="zHx0(Kx4)GBtjP[@7,k)"><field name="speed">100</field></shadow></value><next><block type="sawmotorrun" id="I=JZ-4(KZn+p3/ze]xQX"><field name="motor">crickit.motor2</field><comment>Moteur gauche à pleine vitesse</comment><value name="speed"><shadow type="speedPicker" id="5m.~=]XNj{us|DqJK4mT"><field name="speed">50</field></shadow></value></block></next></block></statement><statement name="ELSE"><block type="sawmotorrun" id=".bPW,UCXFmz)jB^9y*1r"><field name="motor">crickit.motor1</field><comment>Moteur droit plus lent
Avancer tout droit</comment><value name="speed"><shadow type="speedPicker" id="0aJseIIkKKoG2W@Jk8Op"><field name="speed">100</field></shadow></value><next><block type="sawmotorrun" id="yxU_%?f3TL(ghQu;Z]j4"><field name="motor">crickit.motor2</field><comment>Pleine vitesse pour les deux moteurs</comment><value name="speed"><shadow type="speedPicker" id="P)yitd?I+0){e8[V{@L*"><field name="speed">100</field></shadow></value></block></next></block></statement></block></next></block></next></block></statement></block><block type="function_definition" id="9+ztK[URiM6#3cD1dXu`" x="0" y="490"><mutation name="Detect_ir" functionid="LQVwDPHi-aE|V5d((m-X"/><field name="function_name">Detect_ir</field><statement name="STACK"><block type="controls_if" id="U@~pyZ?Vc]O}Z5su-UXJ"><mutation elseif="1" else="1"/><value name="IF0"><shadow type="logic_boolean" disabled="true"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=".vUawS*,!noT5n$tRa!$"><field name="OP">LT</field><value name="A"><shadow type="math_number" disabled="true"><field name="NUM">0</field></shadow><block type="sawpinreadanalog" id="hULk2$Mp8~HVFg|Bkh8m"><field name="pin">crickit.signal1</field></block></value><value name="B"><shadow type="math_number" disabled="true"><field name="NUM">0</field></shadow><block type="variables_get" id="f~q$RD![x%%C4#hR@/|t"><field name="VAR" id="?X5-2WV;He|,$cK6p)MN">Couleur min</field></block></value></block></value><statement name="DO0"><block type="sawpinwrite" id="9PH2k*/EAeT,2kt8NqB`"><field name="pin">crickit.signal1</field><value name="value"><shadow type="toggleHighLow" id="zT+5eg)pG?6y)$Z5}Y5P"><field name="high">true</field></shadow></value></block></statement><value name="IF1"><block type="logic_compare" id="l6{+LTe~NUzmprkFcbl{"><field name="OP">LT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="sawpinreadanalog" id="=WBT6F|+Rv.S3/6kp!Hq"><field name="pin">crickit.signal8</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id=";)LMCCmM.%kX7gQ7Iy;B"><field name="VAR" id="?X5-2WV;He|,$cK6p)MN">Couleur min</field></block></value></block></value><statement name="DO1"><block type="sawpinwrite" id="8XH;j]XWqto?/58WOQ-)"><field name="pin">crickit.signal8</field><value name="value"><shadow type="toggleHighLow" id="{+MUW/t/uzA)5-.S_C0("><field name="high">true</field></shadow></value></block></statement><statement name="ELSE"><block type="sawpinwrite" id="iQA-{~mb#!cPHw0$amD2"><field name="pin">crickit.signal1</field><value name="value"><shadow type="toggleHighLow" id="28`K,XyO[c.^N94nGuy2"><field name="high">false</field></shadow></value><next><block type="sawpinwrite" id=".t,T=mmM(O[Qu/Oc)w3Z"><field name="pin">crickit.signal8</field><value name="value"><shadow type="toggleHighLow" id="]p!r%gXI$[JZ[{O_p/1@"><field name="high">false</field></shadow></value></block></next></block></statement></block></statement></block><block type="function_definition" id="@cW^-ybqmYrfXCG!]rLv" x="670" y="1070"><mutation name="dropBilles" functionid=".R~Bd%NxPm:.OQ[HQ|-w"/><field name="function_name">dropBilles</field><comment>Fonction pour déposer les billes</comment><statement name="STACK"><block type="sawservosetangle" id="WzY:BDg`7?n2_zhn6H/8"><field name="servo">crickit.servo1</field><value name="value"><shadow type="protractorPicker" id="xx#3|qem(d?RQSQpG[1w"><field name="angle">90</field></shadow></value><next><block type="device_pause" id="KR-u,z?loFNDhqa*`w(D"><comment>Ouvre la trappe</comment><value name="pause"><shadow type="timePicker" id="1M?1gC0s@Bb#G;t?!m+u"><field name="ms">1000</field></shadow></value><next><block type="sawservosetangle" id="N0n!_?p8DwgTp])]~tG^"><field name="servo">crickit.servo1</field><comment>Attendre 1 seconde</comment><value name="value"><shadow type="protractorPicker" id="}l[rkT@y_(;O+~:9Lt%#"><field name="angle">0</field></shadow></value><next><block type="device_pause" id="1x@,7g-1b^N#_Q_HSs/q"><value name="pause"><shadow type="timePicker" id="?1CdvY!Prck7Rx,XA*WL"><field name="ms">5000</field></shadow></value></block></next></block></next></block></next></block></statement></block></xml>